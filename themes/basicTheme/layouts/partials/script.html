<script>
    var query = window.location.search;
    console.log(query);

    const currentURL = document.baseURI; // gets the url of the page the iframe is embedded in even with different origins

    if (self != top) {
        console.log("no header or footer");
        document.getElementById("header").remove();
        document.getElementById("footer").remove();
        document.body.style.overflow = "hidden";
    }



    // For sending iframe height multiple times and then stopping on first page load
    // could be fized with proper Canvas Listening
    function setIntervalX(callback, delay, repetitions) {
        var x = 0;
        var intervalID = window.setInterval(function () {

            callback();

            if (++x === repetitions) {
                window.clearInterval(intervalID);
            }
        }, delay);
    }

    // sends postMessage to parent page with hight information
    function sendIframeHeight() {
        parent.postMessage(JSON.stringify({
            subject:

                "lti.frameResize", height: document.documentElement.scrollHeight + "px"
        }), "*");
        console.log("iframe scroll height: " + document.documentElement.scrollHeight + "px");

    }

    document.addEventListener('DOMContentLoaded', function () {

        // This will be repeated 10 times with .01 second intervals:
        setIntervalX(function () {
            // Your logic here
            console.log("Content Loaded");
            sendIframeHeight();
        }, 10, 10);

    });

    var resizeTimer;
    // send new iframe height postMessage if window is resized
    window.onresize = function () {
        clearTimeout(resizeTimer);
        resizeTimer = setTimeout(function () {
            console.log("Window Resize");
            sendIframeHeight();
        }, 100);
    };

    /*
        // Set theme to the user's preferred color scheme dark or light mode
        function updateTheme() {
            const colorMode = window.matchMedia("(prefers-color-scheme: dark)").matches
                ? "dark"
                : "light";
            document.querySelector("html").setAttribute("data-bs-theme", colorMode);
        }
    
        // Set theme on load
        updateTheme()
    
        // Update theme when the preferred scheme changes
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', updateTheme)
    */

</script>